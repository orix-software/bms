{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"BMS : bank management system","text":"<p>It's a cc65 library for Orix in order to manage bank on twilighte board.</p> <p>It only manage ram bank.</p> <p></p>"},{"location":"#versions","title":"Versions","text":"<ul> <li>2025.3 documentation</li> </ul>"},{"location":"_bms_create/","title":"bms create","text":""},{"location":"_bms_create/#void-bms_createsize_t-length-unsigned-char-flags","title":"void *bms_create(size_t length, unsigned char flags);","text":""},{"location":"_bms_error/","title":"bms error","text":""},{"location":"_bms_error/#unsigned-char-bms_error","title":"unsigned char bms_error();","text":""},{"location":"_bms_free/","title":"bms free","text":""},{"location":"_bms_free/#unsigned-char-bms_freebms-bms","title":"unsigned char bms_free(bms *bms);","text":""},{"location":"_bms_read/","title":"bms read","text":""},{"location":"_bms_read/#unsigned-int-bms_writebms-bms-unsigned-int-length-void-data","title":"unsigned int bms_write(bms bms, unsigned int length, void data);","text":""},{"location":"_bms_read_write/","title":"bms read write","text":""},{"location":"_bms_read_write/#unsigned-int-bms_writebms-bms-unsigned-int-length-void-data","title":"unsigned int bms_write(bms bms, unsigned int length, void data);","text":""},{"location":"_bms_seek/","title":"bms seek","text":""},{"location":"_bms_seek/#unsigned-int-bms_seekbms-bms-unsigned-int-offset-unsigned-char-whence","title":"unsigned int bms_seek(bms *bms, unsigned int offset, unsigned char whence);","text":""},{"location":"_bms_write/","title":"bms write","text":""},{"location":"_bms_write/#unsigned-int-bms_writebms-bms-unsigned-int-length-void-data","title":"unsigned int bms_write(bms bms, unsigned int length, void data);","text":""},{"location":"example_create_free/","title":"Example create free","text":"CAssembly/ca65 <pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include \"bms.h\"\n\nint main() {\n    bms *bms_instance;\n    int i;\n    off_t length = 6400; // Example length\n\n    printf(\"Creating bms instance with length %ld....\\n\", length);\n    bms_instance = bms_create(length, FLAG_PROT_READ_WRITE);\n    if (bms_instance == NULL) {\n        printf(\"Failed to create bms instance\\n\");\n        return 0;\n\n    }\n    else {\n        // If we can allocate more than 16 bits, it should not work in that\n        printf(\"bms instance created successfully, it's an error.\\n\");\n        return 0;\n    }\n}\n</code></pre> <pre><code>.include \"bms.inc\"\n</code></pre>"},{"location":"2025.3/","title":"BMS : bank management system (2025.3)","text":""},{"location":"2025.3/#usage-in-c-language","title":"Usage in c language","text":"<ul> <li>void *bms_create(size_t length, unsigned char flags);</li> <li>unsigned char bms_free(bms *bms);</li> <li>unsigned int bms_seek(bms *bms, unsigned int offset, unsigned char whence);</li> <li>unsigned int bms_read_write(bms bms, unsigned int length, void data, unsigned char mode);</li> <li>unsigned char bms_error();</li> <li>unsigned char bms_version();</li> </ul>"},{"location":"2025.3/#usage-in-assembly-language","title":"Usage in assembly language","text":"<ul> <li>bms_create</li> <li>bms_free</li> <li>bms_seek</li> <li>bms_read_write</li> <li>bms_error</li> <li>bms_version</li> </ul>"},{"location":"2025.3/#examples","title":"Examples","text":"<ul> <li>Examples</li> </ul>"},{"location":"2025.3/_bms_create/","title":"bms create","text":""},{"location":"2025.3/_bms_create/#void-bms_createsize_t-length-unsigned-char-flags","title":"void *bms_create(size_t length, unsigned char flags);","text":""},{"location":"2025.3/_bms_error/","title":"bms error","text":""},{"location":"2025.3/_bms_error/#unsigned-char-bms_error","title":"unsigned char bms_error();","text":""},{"location":"2025.3/_bms_free/","title":"bms free","text":""},{"location":"2025.3/_bms_free/#unsigned-char-bms_freebms-bms","title":"unsigned char bms_free(bms *bms);","text":""},{"location":"2025.3/_bms_read_write/","title":"bms read write","text":""},{"location":"2025.3/_bms_read_write/#unsigned-int-bms_writebms-bms-unsigned-int-length-void-data","title":"unsigned int bms_write(bms bms, unsigned int length, void data);","text":""},{"location":"2025.3/_bms_seek/","title":"bms seek","text":""},{"location":"2025.3/_bms_seek/#unsigned-int-bms_seekbms-bms-unsigned-int-offset-unsigned-char-whence","title":"unsigned int bms_seek(bms *bms, unsigned int offset, unsigned char whence);","text":""},{"location":"2025.3/bms_bank_restore_state/","title":"Bms bank restore state","text":""},{"location":"2025.3/bms_bank_restore_state/#bms_bank_restore_state","title":"bms_bank_restore_state","text":"<p>Description</p> <p>restore the state of the bank</p> <p>Modify</p> <ul> <li>RESB</li> <li>TR0</li> <li>TR0</li> </ul>"},{"location":"2025.3/bms_bank_save_state/","title":"Bms bank save state","text":""},{"location":"2025.3/bms_bank_save_state/#bms_bank_save_state","title":"bms_bank_save_state","text":"<p>Description</p> <p>save the state of the bank</p> <p>Modify</p> <ul> <li>RESB</li> <li>TR0</li> <li>TR0</li> </ul>"},{"location":"2025.3/bms_create/","title":"Bms create","text":""},{"location":"2025.3/bms_create/#bms_create","title":"bms_create","text":"<p>Description</p> <p>create slot for bank memory system. Returns NULL and store error, if something is wrong, or returns struct ptr if success Input</p> <ul> <li>Accumulator : flags (eg : FLAG_PROT_READ_WRITE only supported)</li> <li>Y Register : low byte of the length to allocate (0 to 7)</li> <li>X Register : high byte of the length to allocate (8 to 15)</li> <li>RES : 2 byte of the length to allocate (16 to 23)</li> </ul> <p>Modify</p> <ul> <li>RES</li> <li>TR2</li> <li>libzp</li> <li>libzp+2</li> <li>libzp+4</li> <li>libzp+5</li> </ul> <p>Returns</p> <ul> <li>Accumulator : contains the bank number found</li> </ul> <p>Use \"BMS_CREATE length0_to_15, length16_to_31, flags\" macro in 'include/bms.mac'\"!!! note \"Use \"BMS_CREATE length0_to_15, length16_to_31, flags\" macro in 'include/bms.mac'</p>"},{"location":"2025.3/bms_error/","title":"Bms error","text":""},{"location":"2025.3/bms_error/#bms_error","title":"bms_error","text":"<p>Description</p> <p>Returns the error code</p> <p>Returns</p> <ul> <li>Accumulator : contains the error code</li> </ul>"},{"location":"2025.3/bms_free/","title":"Bms free","text":""},{"location":"2025.3/bms_free/#bms_free","title":"bms_free","text":"<p>Description</p> <p>Free bms struct and liberate banks Input</p> <ul> <li>Accumulator : low byte of the bms struct pointer</li> <li>X Register : high byte of the bms struct pointer</li> </ul> <p>Modify</p> <ul> <li>libzp</li> <li>libzp+2</li> <li>libzp+4</li> <li>libzp+5</li> </ul> <p>Example</p> <p><code>asm lda bms_ptr ldx bms_ptr + 1 jsr bms_free</code> Here Here</p>"},{"location":"2025.3/bms_read_write/","title":"Bms read write","text":""},{"location":"2025.3/bms_read_write/#bms_read_write","title":"bms_read_write","text":"<p>Description</p> <p>Write bytes Input</p> <ul> <li>Accumulator : contains the low ptr to the bms structure</li> <li>X Register : contains the high ptr byte to the bms structure</li> <li>Y Register : mode </li> <li>Y Register : mode  Description</li> </ul> <p>compute bank and set depending of the offset (bms_ptr must be set), and set current bank set</p> <p>Modify</p> <ul> <li>RESB</li> <li>TR0</li> <li>libzp</li> <li>libzp+9</li> <li>libzp+9</li> <li>libzp+9</li> <li>libzp+9</li> </ul>"},{"location":"2025.3/bms_seek/","title":"Bms seek","text":""},{"location":"2025.3/bms_seek/#bms_seek","title":"bms_seek","text":"<p>Description</p> <p>Seek in the bms offset Input</p> <ul> <li>Accumulator : low byte of the bms struct pointer</li> <li>X Register : high byte of the bms struct pointer</li> <li>Y Register : whence </li> </ul> <p>Modify</p> <ul> <li>libzp</li> </ul> <p>Modify</p> <ul> <li>libzp</li> </ul> <p>Modify</p> <ul> <li>libzp</li> </ul>"},{"location":"2025.3/bms_version/","title":"Bms version","text":""},{"location":"2025.3/bms_version/#bms_version","title":"bms_version","text":"<p>Description</p> <p>returns version Description</p> <p>returns version Description</p> <p>returns version Description</p> <p>returns version</p>"}]}